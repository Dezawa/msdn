<h3>休日 編集</h3>
<%= disp_errors @models %>
<%=    form_tag(:action => :update_on_table)+submit_tag('更新') %>
<%= (will_paginate @models, :prev_label=>'前へ', :next_label=>'次へ'
       ).gsub(/.update_on_table/,"") %>
<% @models.each{|model| month=Time.parse(model.month);lastday = month.end_of_month -%><%# 月毎に表　-%>
 <table border=1>
  <tr><td rowspan=2><nobr>年 月</td><td rowspan=2>工程</td>
   <td><%= (1..31).map{|day| day}.join("</td><td>") %></td></tr>
  <tr><td><%= (0..lastday.day-1).map{|d|  @wday[(month+d.day).wday]
		}.join("</td><td>") %>
</td></tr>
<tr><td rowspan=5><%= month.strftime("%y年<br>%m月")+
hidden_field(:ube_holyday,:month,{:index=>model.id ,:value=>model.month})%></td>
<% @labels.each{|lbl,sym| holyday = model[sym] -%>
<td><nobr><%= lbl %></td>
<% (0..month.end_of_month.day-1).each{|d|  val=holyday[d] -%> <%# "0","1" -%>
<td><%= my_select_box(:ube_holyday,sym,:id=>model.id,:index=>d,:value=>val,:index=>d) %></td><% } -%></tr>
<% } %><% } %>
</table>

<input id="page" name="page" type="hidden" value="<%= @page %>">
</form>
<br />

<p><%= (will_paginate @models,:prev_label=>'前へ', :next_label=>'次へ').gsub(/add/,"edit") %></p>